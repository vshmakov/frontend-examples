(this["webpackJsonpfrontend-examples"]=this["webpackJsonpfrontend-examples"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var i,s=n(3),a=n.n(s),r=n(9),o=n.n(r),c=(n(14),n(1)),l=n(2),u=n(5),h=n(4),d=n(6),p=n(0),f=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsx)("button",{onClick:this.props.onClick,children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0440\u0435\u0448\u0435\u043d\u0438\u0435"})}}]),n}(a.a.Component),g=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.task;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:Object(p.jsx)(f,{onClick:this.props.startNewTask})}),Object(p.jsx)("h1",{children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0437\u0430\u0434\u0430\u043d\u0438\u044f"}),Object(p.jsxs)("ul",{children:[Object(p.jsxs)("li",{children:["\u0420\u0435\u0448\u0435\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432: ",e.solvedExamplesCount]}),Object(p.jsxs)("li",{children:["\u041e\u0448\u0438\u0431\u043e\u043a: ",e.wrongExamplesCount]}),Object(p.jsxs)("li",{children:["\u041e\u0446\u0435\u043d\u043a\u0430: ",this.props.ratingGenerator.getRating(e)]})]}),Object(p.jsx)("h2",{children:"\u041f\u0440\u0438\u043c\u0435\u0440\u044b"}),Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"\u2116"}),Object(p.jsx)("th",{children:"\u041f\u0440\u0438\u043c\u0435\u0440"}),Object(p.jsx)("th",{children:"\u041e\u0442\u0432\u0435\u0442"})]})}),Object(p.jsx)("tbody",{children:this.showExamples(e)})]})]})}},{key:"showExamples",value:function(e){var t,n=[],i=1,s=Object(d.a)(e.examples);try{for(s.s();!(t=s.n()).done;){var a=t.value;n.push(Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:i}),Object(p.jsx)("td",{children:a.string}),Object(p.jsx)("td",{children:a.answer})]})),a.isSolved&&i++}}catch(r){s.e(r)}finally{s.f()}return n}}]),n}(a.a.Component),j=n(7),x=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={value:e.props.exampleSettings[e.props.name].toString()},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsx)("input",{type:"number",value:this.state.value,onChange:this.changeHandler.bind(this)})}},{key:"changeHandler",value:function(e){var t=this.props.exampleSettings,n=e.target.value;t[this.props.name]=+n,this.setState({value:n})}}]),n}(a.a.Component);function m(e){return Object.keys(e)}function b(e,t){var n,i=Object(d.a)(m(e));try{for(i.s();!(n=i.n()).done;){var s=n.value;if(e[s]!==t[s])return!1}}catch(a){i.e(a)}finally{i.f()}return!0}!function(e){e[e.Add=1]="Add",e[e.Sub=2]="Sub",e[e.Mult=3]="Mult",e[e.Div=4]="Div"}(i||(i={}));var v=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={isSettingsOpened:!1,taskSettings:e.props.taskSettings,exampleSettings:e.props.exampleSettings},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.baseOperation,n=[t,t+1].map(this.renderOperationCheckbox.bind(this));return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:n}),Object(p.jsx)("form",{children:this.props.profiles.map(this.renderProfile.bind(this))}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:function(){return e.setState({isSettingsOpened:!e.state.isSettingsOpened})},children:this.state.isSettingsOpened?"\u0421\u043a\u0440\u044b\u0442\u044c":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})}),this.renderSettings(this.state.exampleSettings)]})}},{key:"renderProfile",value:function(e){return Object(p.jsxs)("label",{children:[Object(p.jsx)("input",{type:"radio",name:"profile",checked:b(this.state.exampleSettings,e.exampleSettings),onChange:this.changeRadioHandler.bind(this,e)}),e.name]},e.name)}},{key:"changeRadioHandler",value:function(e){var t=this.state.exampleSettings;!function(e,t){var n,i=Object(d.a)(m(t));try{for(i.s();!(n=i.n()).done;){var s=n.value;e[s]=t[s]}}catch(a){i.e(a)}finally{i.f()}}(t,e.exampleSettings),this.setState({exampleSettings:t})}},{key:"renderSettings",value:function(e){var t=JSON.stringify(e);return this.state.isSettingsOpened?Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{}),Object(p.jsx)("th",{children:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c"}),Object(p.jsx)("th",{children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c"})]})}),Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),Object(p.jsx)("td",{children:Object(p.jsx)(x,{exampleSettings:e,name:"minValue"},t)}),Object(p.jsx)("td",{children:Object(p.jsx)(x,{exampleSettings:e,name:"maxValue"},t)})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"}),Object(p.jsx)("td",{children:Object(p.jsx)(x,{exampleSettings:e,name:"minResult"},t)}),Object(p.jsx)("td",{children:Object(p.jsx)(x,{exampleSettings:e,name:"maxResult"},t)})]})]})]}):""}},{key:"renderOperationCheckbox",value:function(e){var t,n=(t={},Object(j.a)(t,i.Add,"\u0421\u043b\u043e\u0436\u0435\u043d\u0438\u0435"),Object(j.a)(t,i.Sub,"\u0412\u044b\u0447\u0438\u0442\u0430\u043d\u0438\u0435"),Object(j.a)(t,i.Mult,"\u0423\u043c\u043d\u043e\u0436\u0435\u043d\u0438\u0435"),Object(j.a)(t,i.Div,"\u0414\u0435\u043b\u0435\u043d\u0438\u0435"),t);return Object(p.jsxs)("label",{children:[Object(p.jsx)("input",{type:"checkbox",checked:this.state.taskSettings.operations.includes(e),onChange:this.changeCheckboxHandler.bind(this,e)}),n[e]]},e)}},{key:"changeCheckboxHandler",value:function(e){var t=this.state.taskSettings,n=t.operations.filter((function(t){return t!==e}));t.operations.includes(e)||n.push(e),t.operations=n,this.setState({taskSettings:t})}}]),n}(a.a.Component),O=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={examplesCount:e.getCurrentTaskSettings().examplesCount.toString(),taskSettings:e.getCurrentTaskSettings()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.taskSettings;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:Object(p.jsx)(f,{onClick:this.clickHandler.bind(this)})}),Object(p.jsx)("h1",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0437\u0430\u0434\u0430\u043d\u0438\u044f"}),"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432: ",Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"number",value:this.state.examplesCount,onChange:this.changeExamplesCountHandler.bind(this)})}),Object(p.jsx)(v,{baseOperation:i.Add,taskSettings:e,exampleSettings:e.addSettings,profiles:this.props.profileProvider.addProfiles})]})}},{key:"changeExamplesCountHandler",value:function(e){var t=this.getNewTaskSettings(),n=e.target.value;t.examplesCount=+n,this.setState({examplesCount:n,taskSettings:t})}},{key:"getNewTaskSettings",value:function(){var e=this.state.taskSettings;return{examplesCount:e.examplesCount,operations:e.operations,addSettings:e.addSettings}}},{key:"clickHandler",value:function(){this.props.taskSettingsManager.saveTaskSettings(this.state.taskSettings),this.props.startNewTask()}},{key:"getCurrentTaskSettings",value:function(){return this.props.taskSettingsManager.getCurrentSettings()}}]),n}(a.a.Component),k=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={example:e.getActualOrNewExample(),answer:"",showTaskHistory:!1,showTaskConfig:!1},e}return Object(l.a)(n,[{key:"render",value:function(){if(this.state.showTaskConfig)return Object(p.jsx)(O,{startNewTask:this.startNewTask.bind(this),taskSettingsManager:this.props.taskSettingsManager,profileProvider:this.props.profileProvider});var e=this.getCurrentOrNewTask();return this.state.showTaskHistory?Object(p.jsx)(g,{ratingGenerator:this.props.ratingGenerator,task:e,startNewTask:this.startNewTask.bind(this)}):Object(p.jsxs)("div",{children:[Object(p.jsxs)("form",{onSubmit:this.submitHandler.bind(this),children:[Object(p.jsxs)("h1",{children:["\u041f\u0440\u0438\u043c\u0435\u0440 \u2116",e.currentExampleNumber," \u0438\u0437 ",e.taskSettings.examplesCount]}),Object(p.jsxs)("span",{children:[this.state.example.string," = "]}),Object(p.jsx)("input",{type:"text",value:this.state.answer,onChange:this.changeHandler.bind(this)}),Object(p.jsx)("button",{type:"submit",children:"\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c"})]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:this.clickHandler.bind(this),children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})})]})}},{key:"startNewTask",value:function(){this.props.taskProvider.cleanCurrentTask(),this.setState({example:this.getActualOrNewExample(),showTaskHistory:!1,showTaskConfig:!1})}},{key:"clickHandler",value:function(){this.setState({showTaskConfig:!0})}},{key:"changeHandler",value:function(e){this.setState({answer:e.target.value})}},{key:"submitHandler",value:function(e){e.preventDefault();var t=this.state.answer;""!==t&&(this.setState({answer:""}),this.state.example.answer=+t,this.getCurrentOrNewTask().isSolved?this.setState({showTaskHistory:!0}):this.setState({example:this.getActualOrNewExample()}))}},{key:"getCurrentOrNewTask",value:function(){return this.props.taskProvider.getCurrentOrNewTask()}},{key:"getActualOrNewExample",value:function(){return this.props.exampleProvider.getActualOrNewExample(this.getCurrentOrNewTask())}}]),n}(a.a.Component),S=function(){function e(t,n,i){Object(c.a)(this,e),this.first=t,this.operation=n,this.second=i,this.answer=null}return Object(l.a)(e,[{key:"hasAnswer",get:function(){return null!==this.answer}},{key:"string",get:function(){var e,t=(e={},Object(j.a)(e,i.Add,"+"),Object(j.a)(e,i.Sub,"-"),Object(j.a)(e,i.Mult,"*"),Object(j.a)(e,i.Div,":"),e);return"".concat(this.first," ").concat(t[this.operation]," ").concat(this.second)}},{key:"isSolved",get:function(){return this.answer===this.solution}},{key:"solution",get:function(){switch(this.operation){case i.Add:return this.first+this.second;case i.Sub:return this.first-this.second;case i.Mult:return this.first*this.second}return this.first/this.second}}],[{key:"createFromValues",value:function(t,n){return new e(t.first,n,t.second)}}]),e}(),y=function(){function e(t){Object(c.a)(this,e),this.exampleGenerator=t}return Object(l.a)(e,[{key:"getActualOrNewExample",value:function(e){var t=e.lastExample;if(null!==t&&!t.hasAnswer)return t;var n=this.exampleGenerator.generate(e);return null===t||(null===t||void 0===t?void 0:t.isSolved)||(n=new S(null===t||void 0===t?void 0:t.first,null===t||void 0===t?void 0:t.operation,null===t||void 0===t?void 0:t.second)),e.examples.push(n),n}}]),e}(),w=function(){function e(t){Object(c.a)(this,e),this.taskSettings=t,this.examples=[]}return Object(l.a)(e,[{key:"currentExampleNumber",get:function(){return this.solvedExamplesCount+this.examples.filter((function(e){return!e.hasAnswer})).length}},{key:"rightExamplesCount",get:function(){return this.solvedExamplesCount-this.wrongExamplesCount}},{key:"wrongExamplesCount",get:function(){return this.examples.filter((function(e){return e.hasAnswer&&!e.isSolved})).length}},{key:"solvedExamplesCount",get:function(){return this.solvedExamples.length}},{key:"solvedExamples",get:function(){return this.examples.filter((function(e){return e.isSolved}))}},{key:"remainedExamplesCount",get:function(){return this.taskSettings.examplesCount-this.solvedExamplesCount}},{key:"isSolved",get:function(){return 0===this.remainedExamplesCount}},{key:"lastExample",get:function(){var e=this.examples.length;return 0===e?null:this.examples[e-1]}}]),e}(),C=function(){function e(t){Object(c.a)(this,e),this.taskSettingsManager=t,this.currentTask=null}return Object(l.a)(e,[{key:"getCurrentOrNewTask",value:function(){return null==this.currentTask&&(this.currentTask=new w(this.taskSettingsManager.getCurrentSettings())),this.currentTask}},{key:"cleanCurrentTask",value:function(){this.currentTask=null}}]),e}(),T="task-settings-v1",E=function(){function e(t,n){Object(c.a)(this,e),this.taskSettingsNormalizer=t,this.profileProvider=n}return Object(l.a)(e,[{key:"getCurrentSettings",value:function(){var e=localStorage.getItem(T);return null===e?{examplesCount:10,operations:[i.Add],addSettings:this.profileProvider.defaultAddProfile.exampleSettings}:JSON.parse(e)}},{key:"saveTaskSettings",value:function(e){this.taskSettingsNormalizer.normalize(e),localStorage.setItem(T,JSON.stringify(e))}}]),e}();function N(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function A(e){return e/100<=Math.random()}var V=function(){function e(t,n){Object(c.a)(this,e),this.operationGeneratorCollection=t,this.coefficientGenerator=n}return Object(l.a)(e,[{key:"generate",value:function(e){var t=this.operationGeneratorCollection.getGenerator(this.getOperation(e)),n=e.taskSettings.addSettings,i=t.generate(n);if(A(15))return i;for(var s=0,a=1;a<=100;a++){var r=t.generate(n),o=this.coefficientGenerator.getUniqueCoefficient(r,e);o>s&&(i=r,s=o)}return i}},{key:"getOperation",value:function(e){var t=e.taskSettings.operations;return t[N(0,t.length-1)]}}]),e}(),R=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"getUniqueCoefficient",value:function(e,t){var n,i=1,s=t.solvedExamples,a=s.length||1,r=Object(d.a)(s);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.first===o.first&&e.operation===o.operation&&e.second===o.second&&(i-=.6/a),e.solution===o.solution&&(i-=.4/a)}}catch(c){r.e(c)}finally{r.f()}return i}}]),e}(),M=function(){function e(t){Object(c.a)(this,e),this.generators=t}return Object(l.a)(e,[{key:"getGenerator",value:function(e){var t,n=Object(d.a)(this.generators);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(e===i.operation)return i}}catch(s){n.e(s)}finally{n.f()}throw new DOMException("Generator with ".concat(e," does not exist"))}}]),e}(),H=function e(t,n){Object(c.a)(this,e),this.first=t,this.second=n};function P(e,t,n){if(t>n)throw new DOMException("".concat(t," is greater than ").concat(n));return e<t?t:e>n?n:e}var G=function(){function e(){Object(c.a)(this,e),this.operation=i.Add}return Object(l.a)(e,[{key:"generate",value:function(e){return S.createFromValues(this.generateValues(e),this.operation)}},{key:"generateValues",value:function(e){var t=N(e.minValue,e.maxValue),n=P(e.minValue,e.minResult-t,e.maxResult-t),i=N(n,P(e.maxValue,n,e.maxResult-t));return A(60)?new H(t,i):new H(i,t)}}]),e}(),z=function(){function e(){Object(c.a)(this,e),this.coefficients={10:[5,6,8,9],20:[14,15,17,19]}}return Object(l.a)(e,[{key:"getRating",value:function(e){for(var t=this.getTaskCoefficients(e),n=0;n<t.length&&!(e.rightExamplesCount<t[n]);n++);return n+1}},{key:"getTaskCoefficients",value:function(e){this.coefficients;var t=m(this.coefficients).reduce((function(t,n){return e.solvedExamplesCount>=+n?n:t})),n=+t;return this.coefficients[t].map((function(t){return Math.round(t*e.solvedExamplesCount/n)}))}}]),e}(),D=function(){function e(t){Object(c.a)(this,e),this.originalGenerator=t,this.operation=void 0;var n=t.operation;if(![i.Add,i.Mult].includes(n))throw new DOMException("You can not revert ".concat(n," operation example generation"));this.operation=n+1}return Object(l.a)(e,[{key:"generate",value:function(e){var t=this.originalGenerator.generate(e);return new S(t.solution,this.operation,t.second)}}]),e}(),F=function(){function e(t){Object(c.a)(this,e),this.exampleSettingsNormalizer=t}return Object(l.a)(e,[{key:"normalize",value:function(e){e.examplesCount<1&&(e.examplesCount=10),0===e.operations.length&&e.operations.push(i.Add),this.exampleSettingsNormalizer.normalizeAddSettings(e.addSettings)}}]),e}(),J={name:"\u0412 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 10",exampleSettings:{minValue:1,maxValue:9,minResult:0,maxResult:0}},I=[J,{name:"\u0412 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 20",exampleSettings:{minValue:1,maxValue:19,minResult:0,maxResult:0}},{name:"\u0412 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 100",exampleSettings:{minValue:10,maxValue:90,minResult:0,maxResult:0}},{name:"\u0412 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 10 000 (\u0432 \u0441\u0442\u043e\u043b\u0431\u0438\u043a)",exampleSettings:{minValue:100,maxValue:9900,minResult:0,maxResult:0}},{name:"\u041e\u0442 -100 \u0434\u043e 100",exampleSettings:{minValue:-100,maxValue:100,minResult:-100,maxResult:100}}],q=function(){function e(t){Object(c.a)(this,e),this.exampleSettingsNormalizer=t}return Object(l.a)(e,[{key:"defaultAddProfile",get:function(){return this.exampleSettingsNormalizer.normalizeAddSettings(J.exampleSettings),J}},{key:"addProfiles",get:function(){var e=this;return I.map((function(t){return e.exampleSettingsNormalizer.normalizeAddSettings(t.exampleSettings)})),I}}]),e}(),B=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"normalizeAddSettings",value:function(e){var t,n;e.minValue=(t=e.minValue,n=e.maxValue,t>n?n:t),e.minResult=P(e.minResult,2*e.minValue,e.minValue+e.maxValue),e.maxResult=P(e.maxResult,e.minValue+e.maxValue,2*e.maxValue)}}]),e}(),L=new G,U=new y(new V(new M([L,new D(L)]),new R)),Y=new B,K=new F(Y),Q=new q(Y),W=new E(K,Q),X=new C(W),Z=new z;function $(){return Object(p.jsx)(k,{taskProvider:X,taskSettingsManager:W,ratingGenerator:Z,exampleProvider:U,profileProvider:Q})}var _=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,i=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),s(e),a(e),r(e)}))};o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)($,{})}),document.getElementById("root")),_()}},[[16,1,2]]]);
//# sourceMappingURL=main.40ddc0b5.chunk.js.map