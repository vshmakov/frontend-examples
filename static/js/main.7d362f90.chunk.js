(this["webpackJsonpfrontend-examples"]=this["webpackJsonpfrontend-examples"]||[]).push([[0],{14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var s,a=n(3),r=n.n(a),i=n(9),c=n.n(i),o=(n(14),n(1)),u=n(2),l=n(5),h=n(4),d=n(7),j=n(0),p=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(j.jsx)("button",{onClick:this.props.onClick,children:"Start new task"})}}]),n}(r.a.Component),g=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.task;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)(p,{onClick:this.props.startNewTask})}),Object(j.jsx)("h1",{children:"Task result"}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:["Solved examples count: ",t.solvedExamplesCount]}),Object(j.jsxs)("li",{children:["Errors count: ",t.wrongExamplesCount]}),Object(j.jsxs)("li",{children:["Rating: ",this.props.ratingGenerator.getRating(t)]})]}),Object(j.jsx)("h2",{children:"Examples"}),Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Example"}),Object(j.jsx)("th",{children:"Answer"})]})}),Object(j.jsx)("tbody",{children:this.showExamples(t)})]})]})}},{key:"showExamples",value:function(t){var e,n=[],s=1,a=Object(d.a)(t.examples);try{for(a.s();!(e=a.n()).done;){var r=e.value;n.push(Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:s}),Object(j.jsx)("td",{children:r.string}),Object(j.jsx)("td",{children:r.answer})]})),r.isSolved&&s++}}catch(i){a.e(i)}finally{a.f()}return n}}]),n}(r.a.Component),f=function t(e,n,s){Object(o.a)(this,t),this.examplesCount=e,this.operations=n,this.addSettings=s},b=n(6),x=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={value:t.props.exampleSettings[t.props.name].toString()},t}return Object(u.a)(n,[{key:"render",value:function(){return Object(j.jsx)("input",{type:"number",value:this.state.value,onChange:this.changeHandler.bind(this)})}},{key:"changeHandler",value:function(t){var e=this.props.exampleSettings,n=t.target.value;e[this.props.name]=+n,this.setState({value:n})}}]),n}(r.a.Component);!function(t){t[t.Add=1]="Add",t[t.Sub=2]="Sub",t[t.Mult=3]="Mult",t[t.Div=4]="Div"}(s||(s={}));var v=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={taskSettings:t.props.taskSettings},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.exampleSettings,e=this.props.baseOperation,n=[e,e+1].map(this.renderOperationCheckbox.bind(this));return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:n}),Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{}),Object(j.jsx)("th",{children:"Minimum"}),Object(j.jsx)("th",{children:"Maximum"})]})}),Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Value"}),Object(j.jsx)("td",{children:Object(j.jsx)(x,{exampleSettings:t,name:"minValue"})}),Object(j.jsx)("td",{children:Object(j.jsx)(x,{exampleSettings:t,name:"maxValue"})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Result"}),Object(j.jsx)("td",{children:Object(j.jsx)(x,{exampleSettings:t,name:"minResult"})}),Object(j.jsx)("td",{children:Object(j.jsx)(x,{exampleSettings:t,name:"maxResult"})})]})]})]})]})}},{key:"renderOperationCheckbox",value:function(t){var e,n=(e={},Object(b.a)(e,s.Add,"Add"),Object(b.a)(e,s.Sub,"Sub"),Object(b.a)(e,s.Mult,"Mult"),Object(b.a)(e,s.Div,"Div"),e);return Object(j.jsxs)("label",{children:[Object(j.jsx)("input",{type:"checkbox",checked:this.state.taskSettings.operations.includes(t),onChange:this.changeHandler.bind(this,t)}),n[t]]},t)}},{key:"changeHandler",value:function(t,e){var n=this.state.taskSettings,s=n.operations.filter((function(e){return e!==t}));n.operations.includes(t)||s.push(t),n.operations=s,this.setState({taskSettings:n})}}]),n}(r.a.Component),O=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={examplesCount:t.getCurrentTaskSettings().examplesCount.toString(),taskSettings:t.getCurrentTaskSettings()},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state.taskSettings;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)(p,{onClick:this.clickHandler.bind(this)})}),Object(j.jsx)("h1",{children:"Task settings"}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"number",value:this.state.examplesCount,onChange:this.changeExamplesCountHandler.bind(this)})}),Object(j.jsx)(v,{baseOperation:s.Add,taskSettings:t,exampleSettings:t.addSettings})]})}},{key:"changeExamplesCountHandler",value:function(t){var e=this.getNewTaskSettings(),n=t.target.value;e.examplesCount=+n,this.setState({examplesCount:n,taskSettings:e})}},{key:"getNewTaskSettings",value:function(){var t=this.state.taskSettings;return new f(t.examplesCount,t.operations,t.addSettings)}},{key:"clickHandler",value:function(){this.props.taskSettingsManager.saveTaskSettings(this.state.taskSettings),this.props.startNewTask()}},{key:"getCurrentTaskSettings",value:function(){return this.props.taskSettingsManager.getCurrentSettings()}}]),n}(r.a.Component),m=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={example:t.getActualOrNewExample(),answer:"",showTaskHistory:!1,showTaskConfig:!1},t}return Object(u.a)(n,[{key:"render",value:function(){if(this.state.showTaskConfig)return Object(j.jsx)(O,{startNewTask:this.startNewTask.bind(this),taskSettingsManager:this.props.taskSettingsManager});var t=this.getCurrentOrNewTask();return this.state.showTaskHistory?Object(j.jsx)(g,{ratingGenerator:this.props.ratingGenerator,task:t,startNewTask:this.startNewTask.bind(this)}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("form",{onSubmit:this.submitHandler.bind(this),children:[Object(j.jsxs)("h1",{children:["Example #",t.currentExampleNumber," from ",t.taskSettings.examplesCount]}),Object(j.jsxs)("span",{children:[this.state.example.string," = "]}),Object(j.jsx)("input",{type:"text",value:this.state.answer,onChange:this.changeHandler.bind(this)}),Object(j.jsx)("button",{type:"submit",children:"Answer"})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:this.clickHandler.bind(this),children:"Change settings"})})]})}},{key:"startNewTask",value:function(){this.props.taskProvider.cleanCurrentTask(),this.setState({example:this.getActualOrNewExample(),showTaskHistory:!1,showTaskConfig:!1})}},{key:"clickHandler",value:function(){this.setState({showTaskConfig:!0})}},{key:"changeHandler",value:function(t){this.setState({answer:t.target.value})}},{key:"submitHandler",value:function(t){t.preventDefault();var e=this.state.answer;""!==e&&(this.setState({answer:""}),this.state.example.answer=+e,this.getCurrentOrNewTask().isSolved?this.setState({showTaskHistory:!0}):this.setState({example:this.getActualOrNewExample()}))}},{key:"getCurrentOrNewTask",value:function(){return this.props.taskProvider.getCurrentOrNewTask()}},{key:"getActualOrNewExample",value:function(){return this.props.exampleProvider.getActualOrNewExample(this.getCurrentOrNewTask())}}]),n}(r.a.Component),k=function(){function t(e,n,s){Object(o.a)(this,t),this.first=e,this.operation=n,this.second=s,this.answer=null}return Object(u.a)(t,[{key:"hasAnswer",get:function(){return null!==this.answer}},{key:"string",get:function(){var t,e=(t={},Object(b.a)(t,s.Add,"+"),Object(b.a)(t,s.Sub,"-"),Object(b.a)(t,s.Mult,"*"),Object(b.a)(t,s.Div,":"),t);return"".concat(this.first," ").concat(e[this.operation]," ").concat(this.second)}},{key:"isSolved",get:function(){return this.answer===this.solution}},{key:"solution",get:function(){switch(this.operation){case s.Add:return this.first+this.second;case s.Sub:return this.first-this.second;case s.Mult:return this.first*this.second}return this.first/this.second}}],[{key:"createFromValues",value:function(e,n){return new t(e.first,n,e.second)}}]),t}(),w=function(){function t(e){Object(o.a)(this,t),this.exampleGenerator=e}return Object(u.a)(t,[{key:"getActualOrNewExample",value:function(t){var e=t.lastExample;if(null!==e&&!e.hasAnswer)return e;var n=this.exampleGenerator.generate(t);return null===e||(null===e||void 0===e?void 0:e.isSolved)||(n=new k(null===e||void 0===e?void 0:e.first,null===e||void 0===e?void 0:e.operation,null===e||void 0===e?void 0:e.second)),t.examples.push(n),n}}]),t}(),S=function(){function t(e){Object(o.a)(this,t),this.taskSettings=e,this.examples=[]}return Object(u.a)(t,[{key:"currentExampleNumber",get:function(){return this.solvedExamplesCount+this.examples.filter((function(t){return!t.hasAnswer})).length}},{key:"rightExamplesCount",get:function(){return this.solvedExamplesCount-this.wrongExamplesCount}},{key:"wrongExamplesCount",get:function(){return this.examples.filter((function(t){return t.hasAnswer&&!t.isSolved})).length}},{key:"solvedExamplesCount",get:function(){return this.solvedExamples.length}},{key:"solvedExamples",get:function(){return this.examples.filter((function(t){return t.isSolved}))}},{key:"remainedExamplesCount",get:function(){return this.taskSettings.examplesCount-this.solvedExamplesCount}},{key:"isSolved",get:function(){return 0===this.remainedExamplesCount}},{key:"lastExample",get:function(){var t=this.examples.length;return 0===t?null:this.examples[t-1]}}]),t}(),y=function(){function t(e){Object(o.a)(this,t),this.taskSettingsManager=e,this.currentTask=null}return Object(u.a)(t,[{key:"getCurrentOrNewTask",value:function(){return null==this.currentTask&&(this.currentTask=new S(this.taskSettingsManager.getCurrentSettings())),this.currentTask}},{key:"cleanCurrentTask",value:function(){this.currentTask=null}}]),t}(),C=function t(e,n,s,a){Object(o.a)(this,t),this.minValue=e,this.maxValue=n,this.minResult=s,this.maxResult=a};function T(t,e,n){if(e>n)throw new DOMException("".concat(e," is greater than ").concat(n));return t<e?e:t>n?n:t}var E="task-settings-v1",A=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"getCurrentSettings",value:function(){var t=localStorage.getItem(E);if(null===t){var e=new C(1,9,1,10);return new f(20,[s.Add],e)}return JSON.parse(t)}},{key:"saveTaskSettings",value:function(t){this.normalize(t),localStorage.setItem(E,JSON.stringify(t))}},{key:"normalize",value:function(t){t.examplesCount<1&&(t.examplesCount=10),0===t.operations.length&&t.operations.push(s.Add);var e,n,a=t.addSettings;a.minValue=(e=a.minValue,n=a.maxValue,e>n?n:e),a.minResult=T(a.minResult,2*a.minValue,a.minValue+a.maxValue),a.maxResult=T(a.maxResult,a.minValue+a.maxValue,2*a.maxValue)}}]),t}();function N(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function M(t){return t/100<=Math.random()}var V=function(){function t(e,n){Object(o.a)(this,t),this.operationGeneratorCollection=e,this.coefficientGenerator=n}return Object(u.a)(t,[{key:"generate",value:function(t){var e=this.operationGeneratorCollection.getGenerator(this.getOperation(t)),n=t.taskSettings.addSettings,s=e.generate(n);if(M(15))return s;for(var a=0,r=1;r<=100;r++){var i=e.generate(n),c=this.coefficientGenerator.getUniqueCoefficient(i,t);c>a&&(s=i,a=c)}return s}},{key:"getOperation",value:function(t){var e=t.taskSettings.operations;return e[N(0,e.length-1)]}}]),t}(),H=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"getUniqueCoefficient",value:function(t,e){var n,s=1,a=e.solvedExamples,r=a.length||1,i=Object(d.a)(a);try{for(i.s();!(n=i.n()).done;){var c=n.value;t.first===c.first&&t.operation===c.operation&&t.second===c.second&&(s-=.6/r),t.solution===c.solution&&(s-=.4/r)}}catch(o){i.e(o)}finally{i.f()}return s}}]),t}(),G=function(){function t(e){Object(o.a)(this,t),this.generators=e}return Object(u.a)(t,[{key:"getGenerator",value:function(t){var e,n=Object(d.a)(this.generators);try{for(n.s();!(e=n.n()).done;){var s=e.value;if(t===s.operation)return s}}catch(a){n.e(a)}finally{n.f()}throw new DOMException("Generator with ".concat(t," does not exist"))}}]),t}(),R=function t(e,n){Object(o.a)(this,t),this.first=e,this.second=n},D=function(){function t(){Object(o.a)(this,t),this.operation=s.Add}return Object(u.a)(t,[{key:"generate",value:function(t){return k.createFromValues(this.generateValues(t),this.operation)}},{key:"generateValues",value:function(t){var e=N(t.minValue,t.maxValue),n=T(t.minValue,t.minResult-e,t.maxResult-e),s=N(n,T(t.maxValue,n,t.maxResult-e));return M(60)?new R(e,s):new R(s,e)}}]),t}(),P=function(){function t(){Object(o.a)(this,t),this.coefficients={10:[5,6,8,9],20:[14,15,17,19]}}return Object(u.a)(t,[{key:"getRating",value:function(t){for(var e=this.getTaskCoefficients(t),n=0;n<e.length&&!(t.rightExamplesCount<e[n]);n++);return n+1}},{key:"getTaskCoefficients",value:function(t){var e=Object.keys(this.coefficients).reduce((function(e,n){return t.solvedExamplesCount>=+n?n:e})),n=(this.coefficients,e),s=+n;return this.coefficients[n].map((function(e){return Math.round(e*t.solvedExamplesCount/s)}))}}]),t}(),F=function(){function t(e){Object(o.a)(this,t),this.originalGenerator=e,this.operation=void 0;var n=e.operation;if(![s.Add,s.Mult].includes(n))throw new DOMException("You can not revert ".concat(n," operation example generation"));this.operation=n+1}return Object(u.a)(t,[{key:"generate",value:function(t){var e=this.originalGenerator.generate(t);return new k(e.solution,this.operation,e.second)}}]),t}(),I=new D,J=new w(new V(new G([I,new F(I)]),new H)),q=new A,z=new y(q),B=new P;function L(){return Object(j.jsx)(m,{taskProvider:z,taskSettingsManager:q,ratingGenerator:B,exampleProvider:J})}var U=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),s(t),a(t),r(t),i(t)}))};c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(L,{})}),document.getElementById("root")),U()}},[[16,1,2]]]);
//# sourceMappingURL=main.7d362f90.chunk.js.map