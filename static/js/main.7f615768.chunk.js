(this["webpackJsonpfrontend-examples"]=this["webpackJsonpfrontend-examples"]||[]).push([[0],{14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var s,a=n(3),i=n.n(a),r=n(9),u=n.n(r),c=(n(14),n(1)),l=n(2),o=n(6),h=n(4),d=n(5),j=n(0),g=function(t){Object(o.a)(n,t);var e=Object(h.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this.props.task;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:this.props.startNewTask,children:"Start new task"})}),Object(j.jsx)("h1",{children:"Task result"}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:["Solved examples count: ",t.solvedExamplesCount]}),Object(j.jsxs)("li",{children:["Errors count: ",t.wrongExamplesCount]})]}),Object(j.jsx)("h2",{children:"Examples"}),Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Example"}),Object(j.jsx)("th",{children:"Answer"})]})}),Object(j.jsx)("tbody",{children:this.showExamples(t)})]})]})}},{key:"showExamples",value:function(t){var e,n=[],s=1,a=Object(d.a)(t.examples);try{for(a.s();!(e=a.n()).done;){var i=e.value;n.push(Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:s}),Object(j.jsx)("td",{children:i.string}),Object(j.jsx)("td",{children:i.answer})]})),i.isSolved&&s++}}catch(r){a.e(r)}finally{a.f()}return n}}]),n}(i.a.Component),x=function t(e,n){Object(c.a)(this,t),this.examplesCount=e,this.addSettings=n},f=function(t){Object(o.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={taskSettings:t.getCurrentTaskSettings()},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this.state.taskSettings,e=t.addSettings;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:this.clickHandler.bind(this),children:"Start new task"})}),Object(j.jsx)("h1",{children:"Task settings"}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"number",value:t.examplesCount,onChange:this.changeExamplesCountHandler.bind(this)})}),Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{}),Object(j.jsx)("th",{children:"Minimum"}),Object(j.jsx)("th",{children:"Maximum"})]})}),Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Value"}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{type:"number",value:e.minValue,onChange:this.getChangeSettingsHandler("minValue")})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{type:"number",value:e.maxValue,onChange:this.getChangeSettingsHandler("maxValue")})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Result"}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{type:"number",value:e.minResult,onChange:this.getChangeSettingsHandler("minResult")})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{type:"number",value:e.maxResult,onChange:this.getChangeSettingsHandler("maxResult")})})]})]})]})]})}},{key:"changeExamplesCountHandler",value:function(t){var e=this.getNewTaskSettings();e.examplesCount=+t.target.value,this.setState({taskSettings:e})}},{key:"getNewTaskSettings",value:function(){var t=this.state.taskSettings;return new x(t.examplesCount,t.addSettings)}},{key:"getChangeSettingsHandler",value:function(t){var e=this;return function(n){return e.changeSettingsHandler(n,t)}}},{key:"changeSettingsHandler",value:function(t,e){var n=this.getNewTaskSettings();n.addSettings[e]=+t.target.value,this.setState({taskSettings:n})}},{key:"clickHandler",value:function(){this.props.taskSettingsManager.saveTaskSettings(this.state.taskSettings),this.props.startNewTask()}},{key:"getCurrentTaskSettings",value:function(){return this.props.taskSettingsManager.getCurrentSettings()}}]),n}(i.a.Component),b=function(t){Object(o.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={example:t.getActualOrNewExample(),answer:"",showTaskHistory:!1,showTaskConfig:!1},t}return Object(l.a)(n,[{key:"render",value:function(){if(this.state.showTaskConfig)return Object(j.jsx)(f,{startNewTask:this.startNewTask.bind(this),taskSettingsManager:this.props.taskSettingsManager});var t=this.getCurrentOrNewTask();return this.state.showTaskHistory?Object(j.jsx)(g,{task:t,startNewTask:this.startNewTask.bind(this)}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("form",{onSubmit:this.submitHandler.bind(this),children:[Object(j.jsxs)("h1",{children:["Example #",t.rightExamplesCount," from ",t.taskSettings.examplesCount]}),Object(j.jsxs)("span",{children:[this.state.example.string," = "]}),Object(j.jsx)("input",{type:"text",value:this.state.answer,onChange:this.changeHandler.bind(this)}),Object(j.jsx)("button",{type:"submit",children:"Answer"})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:this.clickHandler.bind(this),children:"Change settings"})})]})}},{key:"startNewTask",value:function(){this.props.taskProvider.cleanCurrentTask(),this.setState({example:this.getActualOrNewExample(),showTaskHistory:!1,showTaskConfig:!1})}},{key:"clickHandler",value:function(){this.setState({showTaskConfig:!0})}},{key:"changeHandler",value:function(t){this.setState({answer:t.target.value})}},{key:"submitHandler",value:function(t){t.preventDefault();var e=this.state.answer;""!==e&&(this.setState({answer:""}),this.state.example.answer=+e,this.getCurrentOrNewTask().isSolved?this.setState({showTaskHistory:!0}):this.setState({example:this.getActualOrNewExample()}))}},{key:"getCurrentOrNewTask",value:function(){return this.props.taskProvider.getCurrentOrNewTask()}},{key:"getActualOrNewExample",value:function(){return this.props.exampleProvider.getActualOrNewExample(this.getCurrentOrNewTask())}}]),n}(i.a.Component),p=n(7);!function(t){t[t.Add=1]="Add",t[t.Sub=2]="Sub",t[t.Mult=3]="Mult",t[t.Div=4]="Div"}(s||(s={}));var v=function(){function t(e,n,s){Object(c.a)(this,t),this.first=e,this.operation=n,this.second=s,this.answer=null}return Object(l.a)(t,[{key:"hasAnswer",get:function(){return null!==this.answer}},{key:"string",get:function(){var t,e=(t={},Object(p.a)(t,s.Add,"+"),Object(p.a)(t,s.Sub,"-"),Object(p.a)(t,s.Mult,"*"),Object(p.a)(t,s.Div,":"),t);return"".concat(this.first," ").concat(e[this.operation]," ").concat(this.second)}},{key:"isSolved",get:function(){return this.answer===this.solution}},{key:"solution",get:function(){switch(this.operation){case s.Add:return this.first+this.second;case s.Sub:return this.first-this.second;case s.Mult:return this.first*this.second}return this.first/this.second}}],[{key:"createFromValues",value:function(e,n){return new t(e.first,n,e.second)}}]),t}(),m=function(){function t(e){Object(c.a)(this,t),this.exampleGenerator=e}return Object(l.a)(t,[{key:"getActualOrNewExample",value:function(t){var e=t.lastExample;if(null!==e&&!e.hasAnswer)return e;var n=this.exampleGenerator.generate(t);return null===e||(null===e||void 0===e?void 0:e.isSolved)||(n=new v(null===e||void 0===e?void 0:e.first,null===e||void 0===e?void 0:e.operation,null===e||void 0===e?void 0:e.second)),t.examples.push(n),n}}]),t}(),O=function(){function t(e){Object(c.a)(this,t),this.taskSettings=e,this.examples=[]}return Object(l.a)(t,[{key:"rightExamplesCount",get:function(){return this.solvedExamplesCount+this.examples.filter((function(t){return!t.hasAnswer})).length}},{key:"wrongExamplesCount",get:function(){return this.examples.filter((function(t){return t.hasAnswer&&!t.isSolved})).length}},{key:"solvedExamplesCount",get:function(){return this.solvedExamples.length}},{key:"solvedExamples",get:function(){return this.examples.filter((function(t){return t.isSolved}))}},{key:"remainedExamplesCount",get:function(){return this.taskSettings.examplesCount-this.solvedExamplesCount}},{key:"isSolved",get:function(){return 0===this.remainedExamplesCount}},{key:"lastExample",get:function(){var t=this.examples.length;return 0===t?null:this.examples[t-1]}}]),t}(),k=function(){function t(e){Object(c.a)(this,t),this.taskSettingsManager=e,this.currentTask=null}return Object(l.a)(t,[{key:"getCurrentOrNewTask",value:function(){return null==this.currentTask&&(this.currentTask=new O(this.taskSettingsManager.getCurrentSettings())),this.currentTask}},{key:"cleanCurrentTask",value:function(){this.currentTask=null}}]),t}(),w=function t(e,n,s,a){Object(c.a)(this,t),this.minValue=e,this.maxValue=n,this.minResult=s,this.maxResult=a};function S(t,e,n){if(e>n)throw new DOMException("".concat(e," is greater than ").concat(n));return t<e?e:t>n?n:t}var y=function(){function t(){Object(c.a)(this,t),this.storageKey="task-settings"}return Object(l.a)(t,[{key:"getCurrentSettings",value:function(){var t=localStorage.getItem(this.storageKey);if(null===t){var e=new w(1,9,1,10);return new x(20,e)}return JSON.parse(t)}},{key:"saveTaskSettings",value:function(t){this.normalize(t),localStorage.setItem(this.storageKey,JSON.stringify(t))}},{key:"normalize",value:function(t){t.examplesCount<1&&(t.examplesCount=1);var e,n,s=t.addSettings;s.minValue=(e=s.minValue,n=s.maxValue,e>n?n:e),s.minResult=S(s.minResult,2*s.minValue,2*s.maxValue),s.maxResult=S(s.maxResult,2*s.minValue,2*s.maxValue)}}]),t}();function C(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function T(t){return t/100<=Math.random()}var E=function(){function t(e,n){Object(c.a)(this,t),this.operationGeneratorCollection=e,this.coefficientGenerator=n}return Object(l.a)(t,[{key:"generate",value:function(t){var e=this.operationGeneratorCollection.getGenerator(s.Add),n=t.taskSettings.addSettings,a=e.generate(n);if(T(15))return a;for(var i=0,r=1;r<=100;r++){var u=e.generate(n),c=this.coefficientGenerator.getUniqueCoefficient(u,t);c>i&&(a=u,i=c)}return a}}]),t}(),N=function(){function t(){Object(c.a)(this,t)}return Object(l.a)(t,[{key:"getUniqueCoefficient",value:function(t,e){var n,s=1,a=e.solvedExamples,i=a.length||1,r=Object(d.a)(a);try{for(r.s();!(n=r.n()).done;){var u=n.value;t.first===u.first&&t.operation===u.operation&&t.second===u.second&&(s-=.6/i),t.solution===u.solution&&(s-=.4/i)}}catch(c){r.e(c)}finally{r.f()}return s}}]),t}(),V=function t(e,n){Object(c.a)(this,t),this.first=e,this.second=n},H=new m(new E(new(function(){function t(e){Object(c.a)(this,t),this.generators=e}return Object(l.a)(t,[{key:"getGenerator",value:function(t){var e,n=Object(d.a)(this.generators);try{for(n.s();!(e=n.n()).done;){var s=e.value;if(t===s.operation)return s}}catch(a){n.e(a)}finally{n.f()}throw new DOMException("Generator with ".concat(t," does not exist"))}}]),t}())([new(function(){function t(){Object(c.a)(this,t),this.operation=s.Add}return Object(l.a)(t,[{key:"generate",value:function(t){return v.createFromValues(this.generateValues(t),this.operation)}},{key:"generateValues",value:function(t){var e=C(t.minValue,t.maxValue),n=S(t.minValue,t.minResult-e,t.minValue),s=C(n,S(t.maxValue,n,t.maxResult-e));return T(60)?new V(e,s):new V(s,e)}}]),t}())]),new N)),A=new y,M=new k(A);function R(){return Object(j.jsx)(b,{taskProvider:M,taskSettingsManager:A,exampleProvider:H})}var G=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),s(t),a(t),i(t),r(t)}))};u.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(R,{})}),document.getElementById("root")),G()}},[[16,1,2]]]);
//# sourceMappingURL=main.7f615768.chunk.js.map