(this["webpackJsonpfrontend-examples"]=this["webpackJsonpfrontend-examples"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var s,a=n(3),r=n.n(a),i=n(9),c=n.n(i),u=(n(14),n(1)),o=n(2),l=n(5),h=n(4),d=n(6),j=n(0),f=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(j.jsx)("button",{onClick:this.props.clickHandler,children:"Start new task"})}}]),n}(r.a.Component),g=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.task;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)(f,{clickHandler:this.props.startNewTask})}),Object(j.jsx)("h1",{children:"Task result"}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:["Solved examples count: ",e.solvedExamplesCount]}),Object(j.jsxs)("li",{children:["Errors count: ",e.wrongExamplesCount]}),Object(j.jsxs)("li",{children:["Rating: ",this.props.ratingGenerator.getRating(e)]})]}),Object(j.jsx)("h2",{children:"Examples"}),Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Example"}),Object(j.jsx)("th",{children:"Answer"})]})}),Object(j.jsx)("tbody",{children:this.showExamples(e)})]})]})}},{key:"showExamples",value:function(e){var t,n=[],s=1,a=Object(d.a)(e.examples);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push(Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:s}),Object(j.jsx)("td",{children:r.string}),Object(j.jsx)("td",{children:r.answer})]})),r.isSolved&&s++}}catch(i){a.e(i)}finally{a.f()}return n}}]),n}(r.a.Component),x=function e(t,n){Object(u.a)(this,e),this.examplesCount=t,this.addSettings=n},p=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={value:e.props.exampleSettings[e.props.name].toString()},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(j.jsx)("input",{type:"number",value:this.state.value,onChange:this.changeHandler.bind(this)})}},{key:"changeHandler",value:function(e){var t=this.props.exampleSettings,n=e.target.value;t[this.props.name]=+n,this.setState({value:n})}}]),n}(r.a.Component),b=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={taskSettings:e.getCurrentTaskSettings()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.taskSettings,t=e.addSettings;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)(f,{clickHandler:this.clickHandler.bind(this)})}),Object(j.jsx)("h1",{children:"Task settings"}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"number",value:e.examplesCount,onChange:this.changeExamplesCountHandler.bind(this)})}),Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{}),Object(j.jsx)("th",{children:"Minimum"}),Object(j.jsx)("th",{children:"Maximum"})]})}),Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Value"}),Object(j.jsx)("td",{children:Object(j.jsx)(p,{exampleSettings:t,name:"minValue"})}),Object(j.jsx)("td",{children:Object(j.jsx)(p,{exampleSettings:t,name:"maxValue"})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Result"}),Object(j.jsx)("td",{children:Object(j.jsx)(p,{exampleSettings:t,name:"minResult"})}),Object(j.jsx)("td",{children:Object(j.jsx)(p,{exampleSettings:t,name:"maxResult"})})]})]})]})]})}},{key:"changeExamplesCountHandler",value:function(e){var t=this.getNewTaskSettings();t.examplesCount=+e.target.value,this.setState({taskSettings:t})}},{key:"getNewTaskSettings",value:function(){var e=this.state.taskSettings;return new x(e.examplesCount,e.addSettings)}},{key:"clickHandler",value:function(){this.props.taskSettingsManager.saveTaskSettings(this.state.taskSettings),this.props.startNewTask()}},{key:"getCurrentTaskSettings",value:function(){return this.props.taskSettingsManager.getCurrentSettings()}}]),n}(r.a.Component),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={example:e.getActualOrNewExample(),answer:"",showTaskHistory:!1,showTaskConfig:!1},e}return Object(o.a)(n,[{key:"render",value:function(){if(this.state.showTaskConfig)return Object(j.jsx)(b,{startNewTask:this.startNewTask.bind(this),taskSettingsManager:this.props.taskSettingsManager});var e=this.getCurrentOrNewTask();return this.state.showTaskHistory?Object(j.jsx)(g,{ratingGenerator:this.props.ratingGenerator,task:e,startNewTask:this.startNewTask.bind(this)}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("form",{onSubmit:this.submitHandler.bind(this),children:[Object(j.jsxs)("h1",{children:["Example #",e.currentExampleNumber," from ",e.taskSettings.examplesCount]}),Object(j.jsxs)("span",{children:[this.state.example.string," = "]}),Object(j.jsx)("input",{type:"text",value:this.state.answer,onChange:this.changeHandler.bind(this)}),Object(j.jsx)("button",{type:"submit",children:"Answer"})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:this.clickHandler.bind(this),children:"Change settings"})})]})}},{key:"startNewTask",value:function(){this.props.taskProvider.cleanCurrentTask(),this.setState({example:this.getActualOrNewExample(),showTaskHistory:!1,showTaskConfig:!1})}},{key:"clickHandler",value:function(){this.setState({showTaskConfig:!0})}},{key:"changeHandler",value:function(e){this.setState({answer:e.target.value})}},{key:"submitHandler",value:function(e){e.preventDefault();var t=this.state.answer;""!==t&&(this.setState({answer:""}),this.state.example.answer=+t,this.getCurrentOrNewTask().isSolved?this.setState({showTaskHistory:!0}):this.setState({example:this.getActualOrNewExample()}))}},{key:"getCurrentOrNewTask",value:function(){return this.props.taskProvider.getCurrentOrNewTask()}},{key:"getActualOrNewExample",value:function(){return this.props.exampleProvider.getActualOrNewExample(this.getCurrentOrNewTask())}}]),n}(r.a.Component),v=n(7);!function(e){e[e.Add=1]="Add",e[e.Sub=2]="Sub",e[e.Mult=3]="Mult",e[e.Div=4]="Div"}(s||(s={}));var O=function(){function e(t,n,s){Object(u.a)(this,e),this.first=t,this.operation=n,this.second=s,this.answer=null}return Object(o.a)(e,[{key:"hasAnswer",get:function(){return null!==this.answer}},{key:"string",get:function(){var e,t=(e={},Object(v.a)(e,s.Add,"+"),Object(v.a)(e,s.Sub,"-"),Object(v.a)(e,s.Mult,"*"),Object(v.a)(e,s.Div,":"),e);return"".concat(this.first," ").concat(t[this.operation]," ").concat(this.second)}},{key:"isSolved",get:function(){return this.answer===this.solution}},{key:"solution",get:function(){switch(this.operation){case s.Add:return this.first+this.second;case s.Sub:return this.first-this.second;case s.Mult:return this.first*this.second}return this.first/this.second}}],[{key:"createFromValues",value:function(t,n){return new e(t.first,n,t.second)}}]),e}(),k=function(){function e(t){Object(u.a)(this,e),this.exampleGenerator=t}return Object(o.a)(e,[{key:"getActualOrNewExample",value:function(e){var t=e.lastExample;if(null!==t&&!t.hasAnswer)return t;var n=this.exampleGenerator.generate(e);return null===t||(null===t||void 0===t?void 0:t.isSolved)||(n=new O(null===t||void 0===t?void 0:t.first,null===t||void 0===t?void 0:t.operation,null===t||void 0===t?void 0:t.second)),e.examples.push(n),n}}]),e}(),w=function(){function e(t){Object(u.a)(this,e),this.taskSettings=t,this.examples=[]}return Object(o.a)(e,[{key:"currentExampleNumber",get:function(){return this.solvedExamplesCount+this.examples.filter((function(e){return!e.hasAnswer})).length}},{key:"rightExamplesCount",get:function(){return this.solvedExamplesCount-this.wrongExamplesCount}},{key:"wrongExamplesCount",get:function(){return this.examples.filter((function(e){return e.hasAnswer&&!e.isSolved})).length}},{key:"solvedExamplesCount",get:function(){return this.solvedExamples.length}},{key:"solvedExamples",get:function(){return this.examples.filter((function(e){return e.isSolved}))}},{key:"remainedExamplesCount",get:function(){return this.taskSettings.examplesCount-this.solvedExamplesCount}},{key:"isSolved",get:function(){return 0===this.remainedExamplesCount}},{key:"lastExample",get:function(){var e=this.examples.length;return 0===e?null:this.examples[e-1]}}]),e}(),y=function(){function e(t){Object(u.a)(this,e),this.taskSettingsManager=t,this.currentTask=null}return Object(o.a)(e,[{key:"getCurrentOrNewTask",value:function(){return null==this.currentTask&&(this.currentTask=new w(this.taskSettingsManager.getCurrentSettings())),this.currentTask}},{key:"cleanCurrentTask",value:function(){this.currentTask=null}}]),e}(),S=function e(t,n,s,a){Object(u.a)(this,e),this.minValue=t,this.maxValue=n,this.minResult=s,this.maxResult=a};function C(e,t,n){if(t>n)throw new DOMException("".concat(t," is greater than ").concat(n));return e<t?t:e>n?n:e}var T=function(){function e(){Object(u.a)(this,e),this.storageKey="task-settings"}return Object(o.a)(e,[{key:"getCurrentSettings",value:function(){var e=localStorage.getItem(this.storageKey);if(null===e){var t=new S(1,9,1,10);return new x(20,t)}return JSON.parse(e)}},{key:"saveTaskSettings",value:function(e){this.normalize(e),localStorage.setItem(this.storageKey,JSON.stringify(e))}},{key:"normalize",value:function(e){e.examplesCount<1&&(e.examplesCount=1);var t,n,s=e.addSettings;s.minValue=(t=s.minValue,n=s.maxValue,t>n?n:t),s.minResult=C(s.minResult,2*s.minValue,s.minValue+s.maxValue),s.maxResult=C(s.maxResult,s.minValue+s.maxValue,2*s.maxValue)}}]),e}();function E(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function N(e){return e/100<=Math.random()}var V=function(){function e(t,n){Object(u.a)(this,e),this.operationGeneratorCollection=t,this.coefficientGenerator=n}return Object(o.a)(e,[{key:"generate",value:function(e){var t=this.operationGeneratorCollection.getGenerator(s.Add),n=e.taskSettings.addSettings,a=t.generate(n);if(N(15))return a;for(var r=0,i=1;i<=100;i++){var c=t.generate(n),u=this.coefficientGenerator.getUniqueCoefficient(c,e);u>r&&(a=c,r=u)}return a}}]),e}(),A=function(){function e(){Object(u.a)(this,e)}return Object(o.a)(e,[{key:"getUniqueCoefficient",value:function(e,t){var n,s=1,a=t.solvedExamples,r=a.length||1,i=Object(d.a)(a);try{for(i.s();!(n=i.n()).done;){var c=n.value;e.first===c.first&&e.operation===c.operation&&e.second===c.second&&(s-=.6/r),e.solution===c.solution&&(s-=.4/r)}}catch(u){i.e(u)}finally{i.f()}return s}}]),e}(),M=function(){function e(t){Object(u.a)(this,e),this.generators=t}return Object(o.a)(e,[{key:"getGenerator",value:function(e){var t,n=Object(d.a)(this.generators);try{for(n.s();!(t=n.n()).done;){var s=t.value;if(e===s.operation)return s}}catch(a){n.e(a)}finally{n.f()}throw new DOMException("Generator with ".concat(e," does not exist"))}}]),e}(),H=function e(t,n){Object(u.a)(this,e),this.first=t,this.second=n},R=function(){function e(){Object(u.a)(this,e),this.operation=s.Add}return Object(o.a)(e,[{key:"generate",value:function(e){return O.createFromValues(this.generateValues(e),this.operation)}},{key:"generateValues",value:function(e){var t=E(e.minValue,e.maxValue),n=C(e.minValue,e.minResult-t,e.maxResult-t),s=E(n,C(e.maxValue,n,e.maxResult-t));return N(60)?new H(t,s):new H(s,t)}}]),e}(),G=function(){function e(){Object(u.a)(this,e),this.coefficients={10:[5,6,8,9],20:[14,15,17,19]}}return Object(o.a)(e,[{key:"getRating",value:function(e){for(var t=this.getTaskCoefficients(e),n=0;n<t.length&&!(e.rightExamplesCount<t[n]);n++);return n+1}},{key:"getTaskCoefficients",value:function(e){var t=Object.keys(this.coefficients).reduce((function(t,n){return e.solvedExamplesCount>=+n?n:t})),n=(this.coefficients,t),s=+n;return this.coefficients[n].map((function(t){return Math.round(t*e.solvedExamplesCount/s)}))}}]),e}(),D=new k(new V(new M([new R]),new A)),P=new T,F=new y(P),I=new G;function J(){return Object(j.jsx)(m,{taskProvider:F,taskSettingsManager:P,ratingGenerator:I,exampleProvider:D})}var K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),s(e),a(e),r(e),i(e)}))};c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(J,{})}),document.getElementById("root")),K()}},[[16,1,2]]]);
//# sourceMappingURL=main.e523c1ff.chunk.js.map